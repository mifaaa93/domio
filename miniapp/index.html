<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Domio</title>
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/miniapp/static/css/styles.css?v=2025-11-05-1">
  <link rel="icon" href="/miniapp/static/favicon.png">
</head>

<body>
  <div class="container">
    <img src="/miniapp/static/images/logo.png" class="main_logo"/>
    
    <h2 id="total-title" class="total-title"></h2>

    <img src="/miniapp/static/images/arrow_down.png" class="arrow-down"/>
    
    <div id="apartments" class="row"></div>
    <div id="pagination" class="pagination"></div>

  </div>

<!-- 1) NEW: read ?type & ?lang BEFORE your main script -->
<script>
  (function initCatAndLangFromUrl() {
    const qs = new URLSearchParams(location.search);
    const typeFromUrl = (qs.get("type") || "listing").toLowerCase();
    const langFromUrl = (qs.get("lang") || "uk").toLowerCase();
    const SUP_LANGS = ["pl", "uk", "en"];
    const safeLang = SUP_LANGS.includes(langFromUrl) ? langFromUrl : "uk";
    // expose globals for script.js
    window.CAT = typeFromUrl; // listing | saved | last_week | ...
    window.APP_LANG = safeLang; // uk | ru | en
    // set <html lang="...">
    document.documentElement.setAttribute("lang", safeLang);
  })();
</script>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<!-- Custom JS -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="/miniapp/static/js/script.js?v=2025-11-05-1"></script>
</body>
</html>
